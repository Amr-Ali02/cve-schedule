let legimg = document.querySelectorAll(".legend div img");
let legp = document.querySelectorAll(".legend div p");
let eimg;
let ep;
let tdata = document.querySelectorAll(".tablebody div:not(.days)");
let p = document.createElement("p");

document.querySelectorAll(".legend div").forEach((ele) => {
  ele.addEventListener("click", () => {
    eimg = ele.firstElementChild.outerHTML;
    ep = ele.lastElementChild.textContent;
  });
});
tdata.forEach((ele) => {
  ele.addEventListener("click", () => {
    if (ele.innerHTML == "<span></span>") {
      if (ele.classList.contains("p1")) p.textContent = "08:30 - 10:00";
      else if (ele.classList.contains("p2")) p.textContent = "10:15 - 11:45";
      else if (ele.classList.contains("p3")) p.textContent = "12:15 - 01:45";
      else if (ele.classList.contains("p4")) p.textContent = "02:00 - 03:30";
      else if (ele.classList.contains("p5")) p.textContent = "03:45 - 05:15";
      ele.style.cssText = `
        font-size:25px;
        text-align:center;
        padding:10px;
        cursor:initial;
        display:grid;
        grid-template-columns: auto 1fr;
        grid-template-rows: auto 1fr;
        gap:5px;
        justify-content: space-around;`;
      ele.innerHTML = `
        <div class="images">${eimg}</div>
        <div class="del">${p.textContent}</div>
        <div contenteditable="true">0000</div>
        <div contenteditable="true">lec.${ep}</div>
        `;

      document.querySelectorAll(".del").forEach((el) => {
        el.addEventListener("dblclick", () => {
          let classes = [...ele.classList];
          ele.innerHTML = `<span></span>`;
          ele.setAttribute("class", "");
          ele.setAttribute("style", "");
          ele.classList.add(...classes);
        });
      });

      document.querySelectorAll(".images").forEach((e) => {
        e.addEventListener("click", () => {
          e.innerHTML += eimg;
        });
      });
    }
  });
});

document.getElementById("print").addEventListener("click", () => {
  window.print();
});
